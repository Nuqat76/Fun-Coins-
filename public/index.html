<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TikTok Coins Versand</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #111;
    }

    /* -------- LOGIN-SCREEN MIT HINTERGRUNDBILD -------- */

    .login-screen {
      position: fixed;
      inset: 0; /* oben, rechts, unten, links = 0 */
      background-image: url("startbild.jpg"); /* <-- DEIN BILD */
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;

      display: flex;
      align-items: center;
      justify-content: flex-start; /* Login links ausrichten */
      padding: 16px;
      z-index: 9999;
    }

    .login-overlay {
      max-width: 350px;
      width: 100%;
      background: rgba(0, 0, 0, 0.75);
      color: #fff;
      padding: 20px 18px 18px;
      border-radius: 16px;
      backdrop-filter: blur(6px);
    }

    .login-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .login-sub {
      font-size: 12px;
      color: #ddd;
      margin-bottom: 14px;
    }

    .login-label {
      font-size: 13px;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .login-input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      outline: none;
    }

    .login-input::placeholder {
      color: #aaa;
    }

    .login-info {
      font-size: 11px;
      margin-top: 8px;
      color: #ccc;
    }

    .login-btn {
      margin-top: 14px;
      width: 100%;
      padding: 11px 0;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      font-weight: 600;
      background: linear-gradient(90deg, #ff0050, #ff5b5b);
      color: #fff;
      cursor: pointer;
    }

    .login-btn:active {
      transform: translateY(1px);
    }

    .login-error {
      margin-top: 8px;
      font-size: 12px;
      color: #ff9c9c;
    }

    /* -------- HAUPTSEITE (COINS) -------- */

    .page {
      max-width: 480px;
      margin: 0 auto;
      padding: 16px 16px 32px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
    }

    .title-block h1 {
      font-size: 18px;
      font-weight: 700;
    }

    .title-block p {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }

    .balance-block {
      text-align: right;
    }

    .balance-label {
      font-size: 12px;
      color: #777;
    }

    .balance-value {
      font-size: 16px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 6px;
    }

    .coin-dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffe48f, #ffb800);
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
    }

    .card {
      background: #ffffff;
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
      margin-bottom: 20px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .card-sub {
      font-size: 13px;
      color: #777;
      margin-bottom: 12px;
    }

    .username-label {
      font-size: 13px;
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 6px;
    }

    .username-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 12px;
    }

    .username-prefix {
      font-size: 14px;
      color: #888;
      padding: 10px 10px;
      background: #f5f5f7;
      border-radius: 10px;
    }

    .username-input {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #e2e2e6;
      font-size: 14px;
      outline: none;
    }

    .coins-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-top: 8px;
    }

    .coin-option {
      border-radius: 12px;
      padding: 10px 8px;
      background: #f8f8fb;
      border: 1px solid #f0f0f4;
      text-align: center;
      cursor: pointer;
      transition: all 0.15s ease-out;
    }

    .coin-option.selected {
      border-color: #ff0050;
      background: rgba(255, 0, 80, 0.06);
      box-shadow: 0 0 0 1px rgba(255, 0, 80, 0.3);
    }

    .coin-icon {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      margin: 0 auto 4px;
      background: radial-gradient(circle at 30% 30%, #ffe48f, #ffb800);
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
    }

    .coin-amount {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .coin-price {
      font-size: 12px;
      color: #777;
    }

    .custom-label {
      font-size: 13px;
      font-weight: 600;
      margin-top: 14px;
      margin-bottom: 6px;
    }

    .custom-input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #e2e2e6;
      font-size: 14px;
      outline: none;
      margin-bottom: 4px;
    }

    .helper-text {
      font-size: 11px;
      color: #777;
      margin-bottom: 10px;
    }

    .send-btn {
      width: 100%;
      border: none;
      margin-top: 4px;
      border-radius: 999px;
      padding: 14px 0;
      font-size: 16px;
      font-weight: 600;
      background: linear-gradient(90deg, #ff0050, #ff7a45);
      color: #fff;
      cursor: pointer;
    }

    .send-btn:active {
      transform: translateY(1px);
    }

    .last-line {
      margin-top: 10px;
      font-size: 12px;
      color: #555;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .last-line span {
      white-space: nowrap;
    }

    /* -------- MODAL ZAHLUNGSBESTÄTIGUNG -------- */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 5000;
    }

    .modal {
      width: min(90%, 420px);
      background: #fff;
      border-radius: 20px;
      padding: 22px 18px 18px;
      text-align: center;
      position: relative;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
    }

    .modal-check {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      margin: 0 auto 12px;
      background: #e7f9ee;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .modal-check::before {
      content: "";
      width: 28px;
      height: 14px;
      border-left: 3px solid #1abc60;
      border-bottom: 3px solid #1abc60;
      transform: rotate(-45deg) translateY(-1px);
      display: block;
    }

    .spinner-ring {
      position: absolute;
      inset: -6px;
      border-radius: 50%;
      border: 3px solid rgba(26, 188, 96, 0.18);
      border-top-color: #1abc60;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .modal-text {
      font-size: 13px;
      color: #555;
      margin-bottom: 10px;
    }

    .modal-timer {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: 2px;
      margin-bottom: 10px;
    }

    .modal-detail {
      font-size: 13px;
      color: #444;
      margin-bottom: 5px;
    }

    .modal-payinfo {
      font-size: 12px;
      color: #666;
    }

    .modal-payinfo span {
      font-weight: 600;
      color: #0070ba;
    }

    .modal-close-btn {
      position: absolute;
      right: 12px;
      top: 10px;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      background: rgba(0, 0, 0, 0.06);
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- LOGIN-SCREEN MIT STARTBILD -->
  <div class="login-screen" id="loginScreen">
    <div class="login-overlay">
      <div class="login-title">Login</div>
      <div class="login-sub">Bitte melde dich an, um den TikTok Coins Versand zu nutzen.</div>

      <label class="login-label" for="loginEmail">E-Mail-Adresse</label>
      <input
        id="loginEmail"
        class="login-input"
        type="email"
        placeholder="Dubai-test@gmx.com"
      />

      <label class="login-label" for="loginPassword">Passwort</label>
      <input
        id="loginPassword"
        class="login-input"
        type="password"
        placeholder="Passwort"
      />

      <div class="login-info">
        Hinweis: Die Sitzung läuft nach 60&nbsp;Minuten automatisch ab.
      </div>

      <button class="login-btn" id="loginBtn">Anmelden</button>
      <div class="login-error" id="loginError" style="display:none;">
        Falsche E-Mail oder falsches Passwort.
      </div>
    </div>
  </div>

  <!-- HAUPTSEITE (WIRD NACH LOGIN SICHTBAR) -->
  <div class="page" id="appPage" style="display:none;">
    <header class="header">
      <div class="title-block">
        <h1>TikTok Coins Versand</h1>
        <p>Herzlich willkommen auf TikTok Coins Versand</p>
      </div>
      <div class="balance-block">
        <div class="balance-label">Münzguthaben</div>
        <div class="balance-value">
          <span id="balanceValue">8.000.000</span>
          <span class="coin-dot"></span>
        </div>
      </div>
    </header>

    <!-- BENUTZERNAME + COINS -->
    <div class="card">
      <div class="card-title">Benutzername</div>
      <div class="card-sub">Gib den TikTok-Nutzernamen ein, der Münzen erhalten soll.</div>

      <div class="username-label">@ Benutzername</div>
      <div class="username-row">
        <div class="username-prefix">@</div>
        <input
          id="usernameInput"
          class="username-input"
          type="text"
          placeholder="TikTok-Name"
        />
      </div>

      <div class="card-title" style="margin-top:4px;">Münzpakete auswählen</div>
      <div class="coins-grid" id="coinsGrid">
        <!-- Nur ein paar Beispiele; du kannst weitere hinzufügen -->
        <div class="coin-option" data-coins="60" data-price="0,87 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">60</div>
          <div class="coin-price">0,87 €</div>
        </div>
        <div class="coin-option" data-coins="139" data-price="2,00 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">139</div>
          <div class="coin-price">2,00 €</div>
        </div>
        <div class="coin-option" data-coins="490" data-price="7,05 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">490</div>
          <div class="coin-price">7,05 €</div>
        </div>
        <div class="coin-option" data-coins="630" data-price="9,05 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">630</div>
          <div class="coin-price">9,05 €</div>
        </div>
        <div class="coin-option" data-coins="840" data-price="12,09 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">840</div>
          <div class="coin-price">12,09 €</div>
        </div>
        <div class="coin-option" data-coins="50000" data-price="5.408,75 €">
          <div class="coin-icon"></div>
          <div class="coin-amount">50.000</div>
          <div class="coin-price">5.408,75 €</div>
        </div>
      </div>

      <div class="custom-label">Eigene Münzanzahl (optional)</div>
      <input
        id="customCoinsInput"
        class="custom-input"
        type="number"
        min="1"
        placeholder="z.B. 85000"
      />
      <div class="helper-text">
        Wenn du hier etwas eingibst, wird diese Anzahl verwendet – statt eines Pakets.
      </div>

      <button class="send-btn" id="sendBtn">● Coins senden</button>

      <div class="last-line">
        <span id="lastSendText">Noch keine Münzen gesendet.</span>
      </div>
    </div>
  </div>

  <!-- MODAL ZAHLUNGSBESTÄTIGUNG -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <button class="modal-close-btn" id="modalCloseBtn">×</button>

      <div class="modal-check">
        <div class="spinner-ring"></div>
      </div>

      <div class="modal-title">Zahlung bestätigt</div>
      <div class="modal-text">
        Die Kartenzahlung wurde erfolgreich ausgeführt.
      </div>

      <div class="modal-timer" id="modalTimer">04:59</div>

      <div class="modal-detail" id="modalDetailText">
        <!-- Wird per JS befüllt -->
      </div>
      <div class="modal-payinfo">
        Bezahlt mit <span>PayPal</span>.
      </div>
    </div>
  </div>

  <script>
    // -------- LOGIN --------
    const loginScreen = document.getElementById("loginScreen");
    const appPage = document.getElementById("appPage");
    const loginBtn = document.getElementById("loginBtn");
    const loginError = document.getElementById("loginError");

    const LOGIN_EMAIL = "Dubai-test@gmx.com";
    const LOGIN_PASSWORD = "Tiktokcoins123";

    let logoutTimer;

    function startLogoutTimer() {
      clearTimeout(logoutTimer);
      // 60 Minuten
      logoutTimer = setTimeout(() => {
        // automatisch ausloggen
        appPage.style.display = "none";
        loginScreen.style.display = "flex";
        alert("Sitzung abgelaufen. Bitte erneut einloggen.");
      }, 60 * 60 * 1000);
    }

    loginBtn.addEventListener("click", () => {
      const email = document.getElementById("loginEmail").value.trim();
      const pw = document.getElementById("loginPassword").value.trim();

      if (email === LOGIN_EMAIL && pw === LOGIN_PASSWORD) {
        loginError.style.display = "none";
        loginScreen.style.display = "none";
        appPage.style.display = "block";
        startLogoutTimer();
      } else {
        loginError.style.display = "block";
      }
    });

    // -------- COINS-LOGIK --------
    const balanceValueEl = document.getElementById("balanceValue");
    const coinsGrid = document.getElementById("coinsGrid");
    const usernameInput = document.getElementById("usernameInput");
    const customCoinsInput = document.getElementById("customCoinsInput");
    const sendBtn = document.getElementById("sendBtn");
    const lastSendText = document.getElementById("lastSendText");

    let balance = 8000000;
    let selectedCoins = null;
    let modalInterval;

    function updateBalanceDisplay() {
      balanceValueEl.textContent = balance.toLocaleString("de-DE");
    }

    coinsGrid.addEventListener("click", (e) => {
      const option = e.target.closest(".coin-option");
      if (!option) return;

      // Ausgewählte Klasse setzen
      document.querySelectorAll(".coin-option").forEach((el) =>
        el.classList.remove("selected")
      );
      option.classList.add("selected");

      selectedCoins = Number(option.dataset.coins);
      // custom-Feld leeren
      customCoinsInput.value = "";
    });

    function openModal(coins, username) {
      const modalBackdrop = document.getElementById("modalBackdrop");
      const modalTimer = document.getElementById("modalTimer");
      const modalDetailText = document.getElementById("modalDetailText");

      modalBackdrop.style.display = "flex";

      // Timer auf 04:59 setzen
      let secondsLeft = 4 * 60 + 59;

      function renderTime() {
        const min = String(Math.floor(secondsLeft / 60)).padStart(2, "0");
        const sec = String(secondsLeft % 60).padStart(2, "0");
        modalTimer.textContent = `${min}:${sec}`;
      }

      renderTime();

      clearInterval(modalInterval);
      modalInterval = setInterval(() => {
        secondsLeft--;
        if (secondsLeft < 0) {
          clearInterval(modalInterval);
          // Modal automatisch schließen, wenn Zeit abgelaufen
          modalBackdrop.style.display = "none";
        } else {
          renderTime();
        }
      }, 1000);

      modalDetailText.textContent = `${coins.toLocaleString(
        "de-DE"
      )} Münzen erfolgreich an @${username} gesendet.`;
    }

    document.getElementById("modalCloseBtn").addEventListener("click", () => {
      document.getElementById("modalBackdrop").style.display = "none";
      clearInterval(modalInterval);
    });

    sendBtn.addEventListener("click", () => {
      const username = usernameInput.value.trim();
      if (!username) {
        alert("Bitte TikTok-Benutzernamen eingeben.");
        return;
      }

      let coinsToSend = selectedCoins;

      if (customCoinsInput.value) {
        coinsToSend = Number(customCoinsInput.value);
      }

      if (!coinsToSend || coinsToSend <= 0) {
        alert("Bitte Münzpaket auswählen oder eigene Münzanzahl eingeben.");
        return;
      }

      if (coinsToSend > balance) {
        alert("Nicht genug Münzguthaben.");
        return;
      }

      // Guthaben abziehen
      balance -= coinsToSend;
      updateBalanceDisplay();

      lastSendText.textContent = `${coinsToSend.toLocaleString(
        "de-DE"
      )} Münzen an @${username} gesendet.`;

      // Zahlungsbestätigung anzeigen
      openModal(coinsToSend, username);
    });

    // Anzeige initial setzen
    updateBalanceDisplay();
  </script>
</body>
</html>
