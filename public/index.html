<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TikTok Coins Versand – Fun</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background: #000;
      color: #111;
    }

    /* LOGIN SCREEN MIT HINTERGRUNDBILD */
    .login-screen {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      position: relative;
      overflow: hidden;
    }

    .login-bg {
      position: absolute;
      inset: 0;
      background-image: url("startbild.jpg"); /* <<< dein Bild */
      background-size: cover;
      background-position: center;
      filter: brightness(0.9);
      z-index: 0;
    }

    .login-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(0,0,0,0.1), rgba(0,0,0,0.65));
      z-index: 1;
    }

    .login-card {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 380px;
      background: rgba(255,255,255,0.94);
      border-radius: 18px;
      padding: 20px 18px 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    }

    /* auf größeren Displays Login nach links ziehen */
    @media (min-width: 768px) {
      .login-screen {
        justify-content: flex-start;
      }
      .login-card {
        margin-left: 6%;
      }
    }

    .login-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 4px;
      text-align: left;
    }

    .login-sub {
      font-size: 12px;
      color: #444;
      margin-bottom: 16px;
      text-align: left;
    }

    .login-label {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .login-input {
      width: 100%;
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 14px;
      background: #fafafa;
      margin-bottom: 10px;
    }

    .login-input:focus {
      outline: none;
      border-color: #ff4664;
      box-shadow: 0 0 0 1px rgba(255,70,100,0.16);
      background: #fff;
    }

    .login-button {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 11px;
      margin-top: 4px;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      background: linear-gradient(90deg,#ff4664,#ff884b);
      cursor: pointer;
    }

    .login-error {
      font-size: 11px;
      color: #dc2626;
      margin-top: 8px;
      min-height: 14px;
      text-align: center;
    }

    .login-small {
      font-size: 10px;
      color: #6b7280;
      text-align: center;
      margin-top: 10px;
    }

    /* HAUPTSEITE */
    .page {
      max-width: 480px;
      margin: 0 auto;
      padding: 16px 16px 32px;
      background: #f5f5f7;
      min-height: 100vh;
    }

    /* HEADER */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .title-block h1 {
      font-size: 18px;
      font-weight: 700;
    }

    .title-block p {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }

    .balance-block { text-align: right; }

    .balance-label {
      font-size: 12px;
      color: #777;
    }

    .balance-value {
      font-size: 16px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 6px;
    }

    .coin-dot {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffeaa7, #f1c40f);
    }

    /* CARD */
    .card {
      background: #fff;
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.06);
      margin-bottom: 20px;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .card-sub {
      font-size: 13px;
      color: #777;
      margin-bottom: 12px;
    }

    .username-label {
      font-size: 13px;
      font-weight: 600;
      margin-top: 8px;
      margin-bottom: 6px;
    }

    .username-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 12px;
    }

    .username-prefix {
      font-size: 14px;
      padding: 10px;
      background: #f5f5f7;
      border-radius: 10px;
      color: #777;
    }

    .username-input {
      flex: 1;
      border-radius: 10px;
      border: 1px solid #ddd;
      padding: 10px 12px;
      font-size: 14px;
      background: #fafafa;
    }

    .username-input:focus {
      outline: none;
      border-color: #ff4664;
      box-shadow: 0 0 0 1px rgba(255,70,100,0.16);
      background: #fff;
    }

    .coins-title {
      font-size: 13px;
      font-weight: 600;
      margin: 6px 0 8px;
    }

    /* COINS GRID */
    .coins-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }

    .coin-option {
      background: #fafafa;
      border-radius: 14px;
      padding: 10px 6px;
      border: 1px solid #e5e5ea;
      text-align: center;
      cursor: pointer;
    }

    .coin-option.selected {
      border-color: #ff4664;
      background: #fff2f5;
    }

    .coin-icon {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff3c4, #f1c40f);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      margin: 0 auto 4px;
    }

    .coin-amount { font-weight: 600; }
    .coin-price { font-size: 11px; color: #777; }

    .custom-coins-label {
      margin-top: 10px;
      font-size: 12px;
      font-weight: 500;
    }

    .custom-coins-input {
      margin-top: 4px;
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #fafafa;
    }

    .primary-btn {
      margin-top: 14px;
      width: 100%;
      border-radius: 999px;
      padding: 14px;
      color: white;
      background: linear-gradient(90deg,#ff4664,#ff884b);
      border: none;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
    }

    .transfer-status {
      margin-top: 8px;
      font-size: 12px;
      color: #666;
    }

    /* MODAL */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .modal-backdrop.show { display: flex; }

    .modal {
      width: 90%;
      max-width: 360px;
      background: #fff;
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }

    .modal-icon-wrap {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #e9f9ef;
      margin: 0 auto 12px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-spinner,
    .modal-check-icon {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-spinner {
      border: 3px solid #e5e7eb;
      border-top-color: #f97316;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .modal-check-icon {
      background: #16a34a;
      color: #fff;
      font-size: 22px;
      font-weight: 700;
      display: none; /* wird per JS gezeigt */
    }

    .modal-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .modal-text {
      font-size: 13px;
      color: #555;
      margin-bottom: 8px;
    }

    .paypal-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      color: #111827;
    }

    .paypal-logo {
      width: 14px;
      height: 14px;
      background: linear-gradient(135deg,#003087,#009cde);
      color: #fff;
      font-size: 10px;
      font-weight: 700;
      border-radius: 3px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-small {
      font-size: 10px;
      color: #9ca3af;
      margin-top: 6px;
    }
  </style>
</head>

<body>

<!-- LOGIN MIT HINTERGRUNDBILD -->
<div id="loginScreen" class="login-screen">
  <div class="login-bg"></div>
  <div class="login-overlay"></div>

  <div class="login-card">
    <div class="login-title">Anmeldung</div>
    <div class="login-sub">Zugang zum TikTok Coins Versand.</div>

    <label class="login-label" for="loginEmail">E-Mail</label>
    <input id="loginEmail" class="login-input" type="email" placeholder="Dubai-test@gmx.com" />

    <label class="login-label" for="loginPassword">Passwort</label>
    <input id="loginPassword" class="login-input" type="password" placeholder="Passwort eingeben" />

    <button id="loginButton" class="login-button">Einloggen</button>

    <div id="loginError" class="login-error"></div>

    <div class="login-small">
      Sitzung läuft automatisch nach <strong>60 Minuten</strong> ab.
    </div>
  </div>
</div>

<!-- HAUPTSEITE (anfangs versteckt) -->
<div id="mainPage" class="page" style="display:none;">

  <!-- HEADER -->
  <header>
    <div class="title-block">
      <h1>TikTok Coins Versand</h1>
      <p>Herzlich willkommen auf TikTok Coins Versand</p>
    </div>

    <div class="balance-block">
      <div class="balance-label">Münzguthaben</div>
      <div class="balance-value">
        <span id="balanceValue">8.000.000</span>
        <span class="coin-dot"></span>
      </div>
    </div>
  </header>

  <!-- CARD -->
  <div class="card">

    <div class="card-title">Benutzername</div>
    <div class="card-sub">Gib den TikTok-Nutzernamen ein.</div>

    <div class="username-label">@ Benutzername</div>
    <div class="username-row">
      <div class="username-prefix">@</div>
      <input id="usernameInput" class="username-input" placeholder="z.B. dein_name" />
    </div>

    <div class="coins-title">Münzpakete auswählen</div>

    <div class="coins-grid" id="coinsGrid">
      <div class="coin-option selected" data-coins="60" data-price="0,87 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">60</div>
        <div class="coin-price">0,87 €</div>
      </div>

      <div class="coin-option" data-coins="139" data-price="2,00 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">139</div>
        <div class="coin-price">2,00 €</div>
      </div>

      <div class="coin-option" data-coins="630" data-price="9,05 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">630</div>
        <div class="coin-price">9,05 €</div>
      </div>

      <div class="coin-option" data-coins="840" data-price="12,09 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">840</div>
        <div class="coin-price">12,09 €</div>
      </div>

      <div class="coin-option" data-coins="10000" data-price="1.103 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">10.000</div>
        <div class="coin-price">1.103 €</div>
      </div>

      <div class="coin-option" data-coins="50000" data-price="5.408 €">
        <div class="coin-icon">♪</div>
        <div class="coin-amount">50.000</div>
        <div class="coin-price">5.408 €</div>
      </div>
    </div>

    <div class="custom-coins-label">Eigene Münzanzahl (optional)</div>
    <input id="customCoinsInput" class="custom-coins-input" type="number" placeholder="z.B. 1234" />

    <button id="sendButton" class="primary-btn">Coins senden</button>

    <div id="transferStatus" class="transfer-status"></div>

  </div>
</div>

<!-- MODAL -->
<div id="modalBackdrop" class="modal-backdrop">
  <div class="modal">
    <div class="modal-icon-wrap">
      <div id="modalSpinner" class="modal-spinner"></div>
      <div id="modalCheck" class="modal-check-icon">✓</div>
    </div>
    <div id="modalTitle" class="modal-title">Zahlung wird verarbeitet</div>
    <div id="modalDetailText" class="modal-text">Coins werden gesendet…</div>
    <div class="modal-text">
      Gezahlt mit
      <span class="paypal-badge">
        <span class="paypal-logo">P</span>
        <span>PayPal</span>
      </span>
    </div>
    <div class="modal-small">Echte Zahlung.</div>
  </div>
</div>

<script>
  // LOGIN KONFIG
  const LOGIN_EMAIL = "Dubai-test@gmx.com";
  const LOGIN_PASSWORD = "Tiktokcoins123";
  const SESSION_MS = 60 * 60 * 1000; // 60 Minuten

  const loginScreen = document.getElementById("loginScreen");
  const mainPage   = document.getElementById("mainPage");
  const loginEmail = document.getElementById("loginEmail");
  const loginPassword = document.getElementById("loginPassword");
  const loginButton   = document.getElementById("loginButton");
  const loginError    = document.getElementById("loginError");

  let logoutTimer = null;

  function startLogoutTimer() {
    clearTimeout(logoutTimer);
    logoutTimer = setTimeout(() => {
      localStorage.removeItem("coins_logged_in");
      alert("Sitzung abgelaufen – bitte neu einloggen.");
      mainPage.style.display = "none";
      loginScreen.style.display = "flex";
    }, SESSION_MS);
  }

  function showMainPage() {
    loginScreen.style.display = "none";
    mainPage.style.display = "block";
    startLogoutTimer();
  }

  // Prüfen, ob schon eingeloggt (im gleichen Browser)
  if (localStorage.getItem("coins_logged_in") === "true") {
    showMainPage();
  }

  loginButton.addEventListener("click", () => {
    const email = (loginEmail.value || "").trim();
    const pass  = loginPassword.value || "";

    if (email === LOGIN_EMAIL && pass === LOGIN_PASSWORD) {
      localStorage.setItem("coins_logged_in", "true");
      loginError.textContent = "";
      showMainPage();
    } else {
      loginError.textContent = "E-Mail oder Passwort ist falsch.";
    }
  });

  loginPassword.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      loginButton.click();
    }
  });

  // COIN-LOGIK
  let balance = 8000000;
  let selectedCoins = 60;

  const balanceSpan = document.getElementById("balanceValue");
  const coinsOptions = document.querySelectorAll(".coin-option");
  const sendButton = document.getElementById("sendButton");
  const usernameInput = document.getElementById("usernameInput");
  const customCoinsInput = document.getElementById("customCoinsInput");
  const transferStatus = document.getElementById("transferStatus");

  const modalBackdrop = document.getElementById("modalBackdrop");
  const modalSpinner  = document.getElementById("modalSpinner");
  const modalCheck    = document.getElementById("modalCheck");
  const modalTitle    = document.getElementById("modalTitle");
  const modalDetailText = document.getElementById("modalDetailText");

  function updateBalance() {
    balanceSpan.textContent = balance.toLocaleString("de-DE");
  }
  updateBalance();

  coinsOptions.forEach(option => {
    option.addEventListener("click", () => {
      coinsOptions.forEach(o => o.classList.remove("selected"));
      option.classList.add("selected");
      selectedCoins = parseInt(option.dataset.coins);
      customCoinsInput.value = "";
      startLogoutTimer(); // Interaktion verlängert Session
    });
  });

  customCoinsInput.addEventListener("input", () => {
    if (customCoinsInput.value) {
      coinsOptions.forEach(o => o.classList.remove("selected"));
    }
    startLogoutTimer();
  });

  function showPaymentModal(coins, user) {
    // Start: Loading
    modalSpinner.style.display = "block";
    modalCheck.style.display = "none";
    modalTitle.textContent = "Zahlung wird verarbeitet";
    modalDetailText.textContent = `${coins} Coins werden an @${user} gesendet…`;

    modalBackdrop.classList.add("show");

    // Nach 1,5s: bestätigt
    setTimeout(() => {
      modalSpinner.style.display = "none";
      modalCheck.style.display = "flex";
      modalTitle.textContent = "Zahlung bestätigt";
      modalDetailText.textContent =
        `${coins} Coins erfolgreich an @${user} gesendet.`;
    }, 1500);

    // Nach 3s Modal schließen
    setTimeout(() => {
      modalBackdrop.classList.remove("show");
    }, 3000);
  }

  sendButton.addEventListener("click", () => {
    const user = usernameInput.value.trim();
    if (!user) {
      alert("Bitte Benutzername eingeben!");
      return;
    }

    let coins = selectedCoins;
    if (customCoinsInput.value) {
      coins = parseInt(customCoinsInput.value);
      if (isNaN(coins) || coins <= 0) {
        alert("Bitte eine gültige Coin-Anzahl eingeben.");
        return;
      }
    }

    if (coins > balance) {
      alert("Nicht genug Münzguthaben.");
      return;
    }

    balance -= coins;
    updateBalance();

    transferStatus.textContent =
      `${coins} Coins erfolgreich an @${user} gesendet.`;

    showPaymentModal(coins, user);
    startLogoutTimer();
  });
</script>

</body>
</html>
